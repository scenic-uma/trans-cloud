<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="../bower_components/app-layout/app-grid/app-grid-style.html">
<link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">


<dom-module id="my-view4">
  <template>
    <style is="custom-style" include="app-grid-style shared-styles">
      :host {
        display: block;
        padding: 50px;
        --app-grid-columns: 2;
        --app-grid-gutter: 15px;
        --app-grid-expandible-item-columns: 2;
      }

      #main-grid {
        width: 80%;
        margin: 0 auto;
      }
        p {
          font-weight: 300;
        }
        ul {
          font-weight: 300;
        }

        .item h1 {
          font-weight: 400;
          border-bottom: 2px solid var(--paper-pink-500) !important;
          border-color: pink;
          margin-bottom: 0;
        }

        a {
          color: black;
          text-decoration:none;
        }

        paper-card {
          background-color: inherit;
        }

        .card-content {
            align: justify;
            padding: 0px !important;
        }

        .plot-image {
          background-color: red;
          --iron-image-width: 100%;
          margin: 0 auto;
        }

        .expandible-item {
          @apply(--app-grid-expandible-item);
        }

        .foot-photo {
          font-weight: 300;
        }

    </style>

    <div id="main-grid" class= "app-grid">
      <div class="item expandible-item">
        <h1>Experimental Deployments</h1>
        <paper-card elevation=0>
          <div class="card-content" align="justify">
            <p align="justify">
              Using the <em>Softcare Use Case</em> it has carried out experiments with four different deployment
              plans using
              <a target="_blank" class="paper-link" href="https://aws.amazon.com/">
                Amazon Web Services</a>,
                <a target="_blank" class="paper-link" href="http://run.pivotal.io/">
                Pivotal Web Services</a> and
                <a target="_blank" class="paper-link" href="http://www.softlayer.com/">
                Softlayer</a> as target locations.
              </p>
              <ul>
                <li>
                    <a target="_blank" class="paper-link" href="https://github.com/scenic-uma/brooklyn-dist/blob/trans-cloud/trans-cloud-samples/softcare-aws.yaml">
                  Softcare-AWS</a>
                  : all modules deployed on AWS.</li>
                <li>
                    <a target="_blank" class="paper-link" href="https://github.com/scenic-uma/brooklyn-dist/blob/trans-cloud/trans-cloud-samples/softcare-aws-pivotal.yaml">
                  Softcare-AWS-Pivotal</a>
                  : all MySql modules deployed on AWS, and all Tomcat modules on Pivotal.</li>
                <li>
                    <a target="_blank" class="paper-link" href="https://github.com/scenic-uma/brooklyn-dist/blob/trans-cloud/trans-cloud-samples/softcare-aws-pivotal-forum.yaml">
                  Softcare-AWS-Pivotal-Forum</a>
                  : all MySql modules plus the Forum module deployed on AWS and the rest on Pivotal.</li>
                <li>
                    <a target="_blank" class="paper-link" href="https://github.com/scenic-uma/brooklyn-dist/blob/trans-cloud/trans-cloud-samples/softcare-aws-softlayer-forum.yaml">
                  Softcare-AWS-Softlayer-Forum</a>
                  : all MySql modules plus the Forum module deployed on Softlayer.</li>
              </ul>
              <p align="justify">
              Each of these four deployment plans has been executed 100 times
              using the extended Brooklyn.<br>
              Thanks to trans-cloud capabilities,
              the only change between these alternative plans is the location
              in which some of the modules are deployed. The tool was
              instrumentalized to gather information at each subtask of
              the process for each module.<br>
              Specifically, although IaaS and PaaS
              locations require different management steps,
              abstract tasks have been identified in both cases:
              <em>setup</em>,
              <em>pre.start</em>,
              <em>deploy</em>,
              <em>pre.launch</em>,
              <em>launch</em>,
              <em>post.launch</em>,
              and <em>post.start</em>,
              and gather the times at which they were
              completed (all time amounts are in seconds)
            </p>
          </div>
        </paper-card>
      </div>

      <div class="item expandible-item">
        <h1>Evaluation</h1>
        <paper-card elevation=0>
          <div class="card-content" align="justify">
            <p align="justify">
              Charts below, pictures <em>a</em>-<em>d</em>, show box plots for the deployment times
              of each of the modules for each of the four deployment plans
              (700 modules for each plan). <br>
              In these charts,  the deployment results have been grouped
              by provider, since they differ quite significantly
              in their performance. If you focus, for example, on the boxes for
              modules deployed on AWS (in orange in all four charts), we
              observe a similar pattern in all four cases. With a different
              concentration of results, the times are quite similar for the
              modules deployed on SoftLayer (in red in picture <em>c</em>).
            </p>
          </div>
        </paper-card>
        </div>


        <div class="item">
            <paper-card elevation=0>
              <div class="card-content" align="justify">
                <div align="center">
                <iron-image preload
                class="plot-image"
                src="../images/plots/aws-boxplot-10.png">
                </iron-image>
                <span class="foot-photo">
                  <em>(a)</em> AWS - Box plot.
              </span>
              </div>
          </div>
        </paper-card>
      </div>

      <div class="item">
          <paper-card elevation=0>
            <div class="card-content" align="justify">
              <div align="center">
              <iron-image preload
              class="plot-image"
              src="../images/plots/aws-pivotal-boxplot-10.png">
              </iron-image>
              <span class="foot-photo">
                <em>(b)</em> AWS-Pivotal - Box plot.
              </span>
            </div>
          </div>
          </paper-card>
        </div>


  <div class="item">
      <paper-card elevation=0>
        <div class="card-content" align="justify">
          <div align="center">
          <iron-image preload
          class="plot-image"
          src="../images/plots/aws-softlayer-forum-boxplot-10.png">
          </iron-image>
          <span class="foot-photo">
            <em>(c)</em> AWS-Softlayer (Forum) - Box plot.
          </span>
        </div>
        </div>
      </paper-card>
    </div>

<div class="item">
    <paper-card elevation=0>
      <div class="card-content" align="justify">
        <div align="center">
        <iron-image preload
        class="plot-image"
        src="../images/plots/aws-pivotal-forum-boxplot-10.png">
        </iron-image>
        <span class="foot-photo">
          <em>(d)</em> AWS-Pivotal (Forum) - Box plot.
        </span>
      </div>
  </div>
</paper-card>
</div>


<div class="item expandible-item">
  <paper-card elevation=0>
    <div class="card-content" align="justify">
      <p align="justify">
        The plots show how
        the values are fairly concentrated around the median values for
        all providers, although with several outliers (around 30â€“40 out
        of 700), which show significant overtimes. Although all the
        deployments were executed sequentially and under similar
        conditions, some of the executions required more than 150%
        the average time. Although most of the deployments were completed
        in less than 450 seconds, some of then took around 750 seconds.
        For modules deployed on IaaS modules, the divergencies in the
        times for the deploy task are due to delays in the provisioning
        of virtual machines or in the creation of the environment to
        update components; divergencies for the pre-launch task are
        due to
        delays in the resolution of dependencies between modules
        and in the pushing of artifacts to the environment.
      </p>
      <p align="justify">
        To get a better idea as to how the sequence of tasks performed,
        in pictures <em>f</em>-<em>h</em> the details for the execution of
        representative deployments have depicted, from which median
        deployment times have taken. They show the times upon the completion
        of each of the tasks for each of the modules of our Softcare application.
        For modules deployed on IaaS services, most of the time is consumed
        in the setup and deploy tasks, since virtual machines must be
        provisioned, software loaded, etc.
      </p>
    </div>
  </paper-card>
  </div>

  <div class="item">
      <paper-card elevation=0>
        <div class="card-content" align="justify">
          <div align="center">
          <iron-image preload
          class="plot-image"
          src="../images/plots/aws-median-task-5.png">
          </iron-image>
          <span class="foot-photo">
            <em>(e)</em> AWS - Median.
        </span>
        </div>
    </div>
  </paper-card>
</div>

<div class="item">
    <paper-card elevation=0>
      <div class="card-content" align="justify">
        <div align="center">
        <iron-image preload
        class="plot-image"
        src="../images/plots/aws-pivotal-median-task-54.png">
        </iron-image>
        <span class="foot-photo">
          <em>(f)</em> AWS-Pivotal - Median.
        </span>
      </div>
    </div>
    </paper-card>
  </div>


<div class="item">
<paper-card elevation=0>
  <div class="card-content" align="justify">
    <div align="center">
    <iron-image preload
    class="plot-image"
    src="../images/plots/aws-softlayer-median-task-6.png">
    </iron-image>
    <span class="foot-photo">
      <em>(g)</em> AWS-Softlayer (Forum) - Median.
    </span>
  </div>
  </div>
</paper-card>
</div>

<div class="item">
<paper-card elevation=0>
<div class="card-content" align="justify">
  <div align="center">
  <iron-image preload
  class="plot-image"
  src="../images/plots/aws-pivotal-forum-median-task-6.png">
  </iron-image>
  <span class="foot-photo">
    <em>(h)</em> AWS-Pivotal (Forum) - Median.
  </span>
</div>
</div>
</paper-card>
</div>



  <div class="item expandible-item">
    <paper-card elevation=0>
      <div class="card-content" align="justify">
        <p align="justify">
        In the chart in picture <em>e</em>
        you can observe how, since all modules are deployed using AWS services, the times are
        similar for all of them. Although with some dispersion, when using AWS
        and SoftLayer, shown in picture <em>g</em>, the times for the different tasks
        follow a similar pattern, with some extra delays for resolving
        dependencies. The charts in picture <em>f</em> and h provide a clearer measure
        of the time required for dependency resolution. Whilst picture <em>f</em> shows
        a clear differentiation between the modules deployed on AWS and
        Pivotal, the chart in Picture <em>h</em>, where the module Forum, on which
        Softcare dashboard depends, clearly shows how this dependency has to be
        solved in the pre-launch, forcing the task to wait until the Forum
        module is available.
      </p>
    </div>
  </paper-card>
  </div>

</div>












  </template>

  <script>
    Polymer({
      is: 'my-view4',

      attached: function() {
        this._updateGridStyles = this._updateGridStyles || function() {
          this.updateStyles();
        }.bind(this);
        window.addEventListener('resize', this._updateGridStyles);
      },

      detached: function() {
        window.removeEventListener('resize', this._updateGridStyles);
      },

    });
  </script>
</dom-module>
